(this["webpackJsonporder-app"]=this["webpackJsonporder-app"]||[]).push([[0],{18:function(e,t,n){e.exports={Detail:"OrderDetail_Detail__2TKQA",Show:"OrderDetail_Show__MxMRY",Button__Success:"OrderDetail_Button__Success__119uj",Button__Danger:"OrderDetail_Button__Danger__3MNJN",MinusIcon:"OrderDetail_MinusIcon__YZdup",PlusIcon:"OrderDetail_PlusIcon__1750E",Disabled:"OrderDetail_Disabled__1GjWt",Selector:"OrderDetail_Selector__2GZX-"}},186:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var r=n(37),a=n.n(r),c=n(13),s=n(14),o=n(16),i=n(15),u=n(1),l=n.n(u),d=n(33),h=n.n(d),j=n(19),m=n(45),p=n.n(m),_=n(0);var b=function(e){return Object(_.jsx)("div",{className:p.a.Hamburger__Container,onClick:e.clicked,children:Object(_.jsx)("div",{className:p.a.Hamburger})})},O=function(e){return e.children};var f=function(e){var t=[h.a.Navigation];e.showNavbar&&(t=t.concat(h.a.Show).join(" "));var n=Object(_.jsx)("div",{onClick:e.setAuthRedirect,children:Object(_.jsx)(j.b,{to:"/auth",children:Object(_.jsx)("i",{className:"fas fa-sign-in-alt",children:Object(_.jsx)("span",{children:"\u767b\u5165"})})})}),r=null;return e.auth.token&&(r=Object(_.jsxs)("div",{children:["Hi ",e.auth.userName]}),n=Object(_.jsxs)(O,{children:[Object(_.jsx)("div",{children:Object(_.jsx)(j.b,{to:"/summary",children:Object(_.jsx)("i",{className:"fas fa-cart-arrow-down",children:Object(_.jsx)("span",{children:"\u6211\u7684\u8a02\u55ae"})})})}),Object(_.jsx)("div",{children:Object(_.jsx)(j.b,{to:"/checkout",children:Object(_.jsx)("i",{className:"fas fa-cart-arrow-down",children:Object(_.jsx)("span",{children:"\u7d50\u5e33"})})})}),Object(_.jsx)("div",{onClick:e.logout,children:Object(_.jsxs)("i",{className:"fas fa-sign-out-alt",children:[Object(_.jsx)("span",{children:"\u767b\u51fa"})," "]})})]})),Object(_.jsxs)("div",{className:h.a.Navbar,children:[Object(_.jsx)("div",{className:h.a.Title,children:Object(_.jsxs)(j.b,{to:"/",children:[Object(_.jsx)("i",{className:"fas fa-hamburger"}),Object(_.jsx)("h2",{children:"Rick's Brunch"})]})}),r,Object(_.jsx)("div",{className:t,children:n}),Object(_.jsx)(b,{clicked:e.toggler})]})},v=n(48),g=n.n(v),x=n(20),I=n.n(x);var C=function(e){var t=Object(_.jsx)("p",{children:"\u8cfc\u7269\u8eca\u76ee\u524d\u6c92\u6709\u54c1\u9805"}),n=null;e.order.cartList.length&&(n=Object(_.jsxs)("div",{onClick:e.checkoutButton,className:I.a.CheckoutButton,children:[e.auth.token?null:"\u767b\u5165\u4e26","\u7d50\u5e33"]}));var r=[I.a.Cost];return e.showColumn&&(r=r.concat(I.a.Show).join(" ")),e.order.cartList.length&&(t=e.order.cartList.map((function(t){return Object(_.jsxs)("div",{className:I.a.Cost__List__Item,children:[Object(_.jsxs)("div",{className:I.a.Item__Detail,children:[Object(_.jsx)("div",{children:t.name}),Object(_.jsx)("div",{children:t.number}),Object(_.jsx)("div",{children:t.price*t.number})]}),Object(_.jsxs)("div",{className:I.a.Modified,children:[Object(_.jsx)("button",{onClick:function(){return e.onChoose(t)},children:"\u4fee\u6539"}),Object(_.jsx)("button",{onClick:function(){return e.onRemove(t.name)},children:"\u79fb\u9664"})]})]},t.id)}))),Object(_.jsxs)("div",{className:r,children:[Object(_.jsx)("div",{className:I.a.Cross,onClick:e.columnController}),Object(_.jsx)("h3",{children:"\u60a8\u7684\u8cfc\u7269\u8eca"}),Object(_.jsxs)("div",{className:I.a.Cost__ItemName,children:[Object(_.jsx)("div",{children:"\u54c1\u9805"}),Object(_.jsx)("div",{children:"\u6578\u91cf"}),Object(_.jsx)("div",{children:"\u7e3d\u50f9"})]}),Object(_.jsx)("div",{className:I.a.Cost__List,children:t}),n]})},N=n(21),S=n.n(N),y=n(73),k=n.n(y);var w=function(){return Object(_.jsx)("div",{className:k.a.Loader,children:"Loading..."})};var T=function(e){var t=["/omelette","/toast","/hamburger","/dessert","/drinks"].includes(e.pathname),n=t?e.fetch.menuList.filter((function(t){return t.type===e.pathname.replace("/","")})):e.fetch.menuList,r=e.imgStatus?null:Object(_.jsx)(w,{}),a=e.fetch.error?Object(_.jsx)("h1",{style:{margin:"0 auto"},children:e.fetch.error}):null;return!e.fetch.err&&e.fetch.menuList.length>0&&(a=n.map((function(t){return Object(_.jsxs)("div",{className:S.a.Item,children:[Object(_.jsxs)("div",{className:S.a.Item__Picture,children:[r,Object(_.jsx)("img",{src:t.url,alt:t.name,className:S.a.Item__Pic,onLoad:e.handleImageLoaded})]}),Object(_.jsxs)("div",{className:S.a.Item__Info,children:[Object(_.jsxs)("div",{className:S.a.Item__Name,children:[t.name," "]}),Object(_.jsxs)("div",{className:S.a.Item__Price,children:["$",t.price,"NT "]})]}),Object(_.jsx)("button",{className:S.a.Item__Button,onClick:function(n){return e.onChoose(t,n)},children:"\u4e0b\u55ae"})]},t.id)}))),Object(_.jsx)(O,{children:Object(_.jsxs)("div",{className:S.a.Items,onClick:function(){return e.exitDetail()},children:[Object(_.jsx)("h2",{children:t?e.pathname.replace("/","").toUpperCase():null}),Object(_.jsx)("div",{className:S.a.Items__flexbox,children:a})]})})},E=n(18),D=n.n(E);var L=function(e){var t=D.a.Detail,n=D.a.PlusIcon,r=D.a.MinusIcon;return e.order.showDetail&&(t=t.concat(" ".concat(D.a.Show))),e.order.currentItem.number<=1&&(r=r.concat(" ".concat(D.a.Disabled))),e.order.currentItem.number>=10&&(n=n.concat(" ".concat(D.a.Disabled))),Object(_.jsxs)("div",{className:t,style:{backgroundImage:"linear-gradient(45deg, rgb(8 5 5 / 60%), rgb(5 5 5 / 80%)),url(".concat(e.order.currentItem.url,")")},children:[Object(_.jsx)("div",{children:e.order.currentItem.name}),Object(_.jsxs)("div",{className:D.a.Selector,children:[Object(_.jsxs)("div",{className:r,onClick:function(){return e.onChange(!1)},children:[Object(_.jsx)("i",{className:"fas fa-minus-circle"})," "]}),Object(_.jsx)("div",{children:e.order.currentItem.number}),Object(_.jsxs)("div",{className:n,onClick:function(){return e.onChange(!0)},children:[" ",Object(_.jsx)("i",{className:"fas fa-plus-circle"})," "]})]}),Object(_.jsxs)("div",{children:["$NT",e.order.currentItem.number*e.order.currentItem.price]}),Object(_.jsxs)("div",{className:D.a.Buttongroup,children:[Object(_.jsx)("button",{className:D.a.Button__Success,onClick:function(){return e.onAdd(e.order.currentItem)},children:"\u52a0\u5165\u8cfc\u7269\u8eca"}),Object(_.jsx)("button",{className:D.a.Button__Danger,onClick:e.cancelButton,children:"\u53d6\u6d88"})]})]})},A=n(22),R=n.n(A);var P=function(e){return Object(_.jsx)("div",{className:R.a.Menu,children:Object(_.jsxs)("div",{className:R.a.List,children:[Object(_.jsx)("div",{onClick:function(){return e.replacePage("/all")},className:R.a.Item,children:Object(_.jsxs)("i",{className:"fas fa-border-all",children:[Object(_.jsx)("span",{children:"\u5168\u9805"})," "]})}),Object(_.jsx)("div",{onClick:function(){return e.replacePage("/omelette")},className:R.a.Item,children:Object(_.jsx)("i",{className:"fas fa-egg",children:Object(_.jsx)("span",{children:"\u86cb\u9905"})})}),Object(_.jsx)("div",{onClick:function(){return e.replacePage("/toast")},className:R.a.Item,children:Object(_.jsx)("i",{className:"fas fa-bread-slice",children:Object(_.jsx)("span",{children:"\u5410\u53f8"})})}),Object(_.jsx)("div",{onClick:function(){return e.replacePage("/hamburger")},className:R.a.Item,children:Object(_.jsx)("i",{className:"fas fa-hamburger",children:Object(_.jsx)("span",{children:"\u6f22\u5821"})})}),Object(_.jsx)("div",{onClick:function(){return e.replacePage("/dessert")},className:R.a.Item,children:Object(_.jsx)("i",{className:"fas fa-stroopwafel",children:Object(_.jsx)("span",{children:"\u8f15\u98df"})})}),Object(_.jsx)("div",{onClick:function(){return e.replacePage("/drinks")},className:R.a.Item,children:Object(_.jsx)("i",{className:"fas fa-coffee",children:Object(_.jsx)("span",{children:"\u98f2\u54c1"})})})]})})},M=n(39),F=n.n(M);var H=function(e){var t=e.cartList.length?Object(_.jsx)("span",{className:F.a.Number,children:e.cartList.length}):null;return Object(_.jsxs)("div",{className:F.a.ViewCart,onClick:e.columnController,children:[Object(_.jsx)("div",{className:F.a.Content,children:Object(_.jsx)("i",{className:"fas fa-shopping-cart",children:Object(_.jsx)("span",{children:"\u6aa2\u8996\u8cfc\u7269\u8eca"})})}),t]})},U=n(74),B=n.n(U),V=n(75),G=n.n(V);var W=function(e){return e.show?Object(_.jsx)("div",{className:G.a.Backdrop,onClick:e.clicked}):null};var Z=function(e){return Object(_.jsxs)(O,{children:[Object(_.jsx)(W,{show:e.show,clicked:e.modalClosed}),Object(_.jsx)("div",{className:B.a.Modal,style:{opacity:e.show?"1":"0",visibility:e.show?"visible":"hidden"},children:e.children})]})},X=n(7),Y=n(49),Q=n.n(Y),q=n(76),z=n(31),J=n.n(z),K="AIzaSyAIz3sMsD1sbECzkEiTglFgZETcgRQT3CM",$=function(e){return{type:"SET_AUTH_REDIRECT",path:e}},ee=function(e,t,n,r){return{type:"AUTH_SUCCESS",method:e,idToken:t,userId:n,email:r}},te=function(){return function(e,t){localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),localStorage.removeItem("method"),"GOOGLE"===t().auth.type&&window.gapi.auth2.getAuthInstance().signOut(),e({type:"LOGOUT"})}},ne=function(e){return function(t){setTimeout((function(){t(te())}),1e3*e)}},re=function(e,t,n,r,a){localStorage.setItem("expirationDate",t+(new Date).getTime()),localStorage.setItem("token",n),localStorage.setItem("userName",a),localStorage.setItem("userId",r),localStorage.setItem("method",e)},ae=function(e,t){return J.a.post(e,t).then((function(e){return e.data})).catch((function(e){return e.response.data.error}))},ce=function(e){return{expiresIn:1e3*e.expiresIn,userId:e.localId,userName:e.firstName?e.firstName:e.email,token:e.idToken}},se=n(3),oe=J.a.create({baseURL:"https://orderpage-19c99-default-rtdb.firebaseio.com"}),ie=function(e,t){return function(n){n({type:"FETCH_ORDERS_START"}),oe.get("orders.json?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"')).then((function(e){var t=[];for(var r in e.data)t.push({data:e.data[r],id:r});if(!t.length)throw new Error("\u7121\u4e0b\u55ae\u7d00\u9304");n({type:"FETCH_ORDERS_SUCCESS",order:t})})).catch((function(e){n({type:"FETCH_ORDERS_FAIL",err:e.message})}))}},ue=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={showColumn:!1,imgStatus:!1},e.columnController=function(){e.setState((function(e){return{showColumn:!e.showColumn}}))},e.exitDetail=function(){e.props.order.showDetail&&e.props.onCancel()},e.replacePage=function(t){e.props.history.replace(t)},e.handleImageLoaded=function(){e.setState({imgStatus:!0})},e.checkoutButton=function(){e.props.auth.token?e.props.history.push("/checkout"):(e.props.setAuthRedirect("/checkout"),e.props.history.push("/auth"))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initSpinner(),this.props.fetch.menuList.length||this.props.fetchMenu()}},{key:"render",value:function(){var e=Object(_.jsx)(w,{});return(this.props.fetch.menuList.length||this.props.fetch.error)&&(e=Object(_.jsx)(T,{onChoose:this.props.onChoose,exitDetail:this.exitDetail,fetch:this.props.fetch,imgStatus:this.state.imgStatus,pathname:this.props.history.location.pathname,handleImageLoaded:this.handleImageLoaded})),Object(_.jsxs)(O,{children:[Object(_.jsx)(Z,{show:this.props.fetch.showModal,modalClosed:this.props.closeModal,children:this.props.fetch.error?this.props.fetch.error:null}),Object(_.jsxs)("div",{className:g.a.Container,children:[Object(_.jsx)(P,{replacePage:this.replacePage}),Object(_.jsxs)("div",{className:g.a.List,children:[Object(_.jsx)(H,{columnController:this.columnController,cartList:this.props.order.cartList}),Object(_.jsx)(C,{order:this.props.order,onChoose:this.props.onChoose,onRemove:this.props.onRemove,auth:this.props.auth,checkoutButton:this.checkoutButton,showColumn:this.state.showColumn,columnController:this.columnController}),e,Object(_.jsx)(L,{order:this.props.order,onChange:this.props.onChange,cancelButton:this.props.onCancel,onAdd:this.props.onAdd})]})]})]})}}]),n}(l.a.Component),le=Object(X.b)((function(e){return{order:e.order,auth:e.auth,fetch:e.fetch}}),(function(e){return{onChoose:function(t,n,r){return e(function(e){return{type:"CHOOSE_ITEM",item:e,event:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}(t,n,r))},onChange:function(t){return e(function(e){return{type:"CHANGE_NUMBER",add:e}}(t))},onCancel:function(){return e({type:"INITIALIZE_ITEM"})},onAdd:function(t){return e(function(e){return{type:"ADD_ITEM",item:e}}(t))},onRemove:function(t){return e(function(e){return{type:"REMOVE_ITEM",name:e}}(t))},navToggler:function(){return e({type:"TOGGLE_NAV"})},setAuthRedirect:function(t){return e($(t))},fetchMenu:function(){return e((function(e){e({type:"FETCH_MENU_START"}),oe.get("menu.json").then((function(t){var n=[];for(var r in t.data)n.push(Object(se.a)(Object(se.a)({},t.data[r]),{},{id:r}));n.sort((function(e,t){return t.type.length-e.type.length})),e({type:"FETCH_MENU_SUCCESS",menuList:n})})).catch((function(t){e({type:"FETCH_MENU_FAIL",err:t.message})}))}))},closeModal:function(){return e({type:"MODAL_CLOSE"})},initSpinner:function(){return e({type:"INIT_SPINNER"})}}}))(ue),de=n(27),he=n(77),je=n.n(he),me=n(25),pe=n.n(me);var _e=function(e){var t=[pe.a.InputElement],n=[pe.a.Label];!e.valid&&e.touched?t.push(pe.a.Invalid):e.valid&&e.touched&&(t.push(pe.a.Valid),n.push(pe.a.Fixed));var r=Object(_.jsx)("input",Object(se.a)(Object(se.a)({className:t.join(" ")},e.elementConfig),{},{value:e.value,required:!0,onChange:e.changed}));return Object(_.jsxs)("div",{className:pe.a.Input,children:[r,Object(_.jsx)("label",{className:n.join(" "),children:e.elementConfig.placeholder})]})},be=n(40),Oe=n.n(be),fe=function(e){var t=[Oe.a.Button];e.fullWidth&&t.push(Oe.a.FullWidth),e.btnType&&t.push(Oe.a[e.btnType]);var n=t.join(" ");return Object(_.jsx)("button",{disabled:e.disabled,className:n,onClick:e.clicked,children:e.children})},ve=n(23),ge=n.n(ve),xe=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"\u806f\u7d61\u4eba"},value:"",valid:!1,touched:!1},address:{elementType:"input",elementConfig:{type:"text",placeholder:"\u4f4f\u5740"},value:"",valid:!1,touched:!1},phone:{elementType:"input",elementConfig:{type:"text",placeholder:"\u96fb\u8a71"},value:"",valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:"E-MAIL"},value:"",valid:!1,touched:!1}},formIsValid:!1},e.inputChangedHandler=function(t,n){var r=!1,a=[];switch(n){case"phone":r=ge.a.isMobilePhone(t.target.value);break;case"email":r=ge.a.isEmail(t.target.value);break;default:r=!ge.a.isEmpty(t.target.value)}var c=Object(se.a)(Object(se.a)({},e.state.orderForm[n]),{value:t.target.value,valid:r,touched:!0}),s=Object(se.a)(Object(se.a)({},e.state.orderForm),Object(de.a)({},n,c));for(var o in s)a.push(s[o].valid);var i=a.includes(!1);e.setState({orderForm:s,formIsValid:!i})},e.submitForm=function(t){t.preventDefault();var n={};for(var r in e.state.orderForm)n[r]=e.state.orderForm[r].value;var a=(new Date).getTime(),c={orders:e.props.order.cartList,price:e.props.order.total,userId:e.props.auth.userId,contactData:n,date:a};e.props.onPurchase(e.props.auth.token,e.props.auth.userId,c)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.orderForm)t.push({id:n,config:this.state.orderForm[n]});var r=Object(_.jsxs)("form",{onSubmit:function(t){return e.submitForm(t)},children:[t.map((function(t){return Object(_.jsx)(_e,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,valid:t.config.valid,touched:t.config.touched,changed:function(n){return e.inputChangedHandler(n,t.id)}},t.id)})),Object(_.jsx)(fe,{btnType:"Success",disabled:!this.state.formIsValid,children:"Order"})]});return this.props.showSpinner&&(r=Object(_.jsx)(w,{})),Object(_.jsxs)("div",{className:je.a.ContactData,children:[Object(_.jsx)("h3",{children:"\u8acb\u8f38\u5165\u60a8\u7684\u5916\u9001\u8cc7\u8a0a"}),r]})}}]),n}(l.a.Component),Ie=Object(X.b)((function(e){return{order:e.order,auth:e.auth,showSpinner:e.fetch.showSpinner}}),(function(e){return{onPurchase:function(t,n,r){return e(function(e,t,n){return function(r){r({type:"PURCHASE_START"}),oe.post("/orders.json?auth=".concat(e),n).then((function(){r({type:"PURCHASE_SUCCESS"})})).then((function(){ie(e,t)})).catch((function(e){console.log(e.response.data)}))}}(t,n,r))}}}))(xe),Ce=n(24),Ne=n.n(Ce),Se=n(5),ye=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).redirect=function(){var t=e.props.purchase?"/summary":"/";e.props.history.push(t)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initSpinner()}},{key:"render",value:function(){var e=null;if(this.props.order.cartList.length){var t=this.props.order.cartList.map((function(e){return Object(_.jsxs)("div",{className:Ne.a.Item,children:[Object(_.jsx)("div",{className:Ne.a.Item__Name,children:e.name}),Object(_.jsxs)("div",{children:["\u6578\u91cf: ",e.number]}),Object(_.jsxs)("div",{children:["\u7e3d\u984d: ",e.total]})]},e.name)}));e=Object(_.jsxs)("div",{className:Ne.a.Checkout,children:[Object(_.jsxs)("div",{className:Ne.a.Checkout__ItemList,children:[Object(_.jsx)("h3",{children:"\u8acb\u78ba\u8a8d\u60a8\u7684\u9910\u9ede"}),Object(_.jsx)("div",{className:Ne.a.Checkout__Items,children:t}),Object(_.jsxs)("div",{className:Ne.a.Checkout__TotalPrice,children:["\u5168\u90e8\u9910\u9ede\u7684\u7e3d\u91d1\u984d\u70ba:",this.props.order.total]})]}),Object(_.jsx)(Ie,{})]})}return Object(_.jsxs)("div",{className:Ne.a.Container,children:[this.props.auth.token?null:Object(_.jsx)(Se.a,{to:"/"}),Object(_.jsx)(Z,{show:!this.props.order.cartList.length||this.props.purchase,modalClosed:this.redirect,children:this.props.purchase?"\u4e0b\u55ae\u6210\u529f\uff0c\u524d\u5f80\u8a02\u55ae":"\u8cfc\u7269\u8eca\u70ba\u7a7a\uff0c\u8fd4\u56de\u4e3b\u9801"}),e]})}}]),n}(l.a.Component),ke=Object(X.b)((function(e){return{order:e.order,auth:e.auth,showNavbar:e.fetch.showNavbar,purchase:e.fetch.purchase}}),(function(e){return{navToggler:function(){return e({type:"TOGGLE_NAV"})},initSpinner:function(){return e({type:"INIT_SPINNER"})}}}))(ye),we=n(28),Te=n.n(we),Ee=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orderForm:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"E-mail"},value:"",valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",valid:!1,touched:!1}},formIsValid:!1,forSignIn:!0},e.inputChangedHandler=function(t,n){var r=!1,a=[];switch(n){case"phone":r=ge.a.isMobilePhone(t.target.value);break;case"email":r=ge.a.isEmail(t.target.value);break;default:r=!ge.a.isEmpty(t.target.value)}var c=Object(se.a)(Object(se.a)({},e.state.orderForm[n]),{value:t.target.value,valid:r,touched:!0}),s=Object(se.a)(Object(se.a)({},e.state.orderForm),Object(de.a)({},n,c));for(var o in s)a.push(s[o].valid);var i=a.includes(!1);e.setState({orderForm:s,formIsValid:!i})},e.switch=function(){e.setState((function(e){return{forSignIn:!e.forSignIn}}))},e.formOnSubmit=function(t){t.preventDefault(),e.props.sign("FIREBASE",e.state.orderForm.email.value,e.state.orderForm.password.value,e.state.forSignIn)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initSpinner(),0===this.props.cartList.length&&"/"!==this.props.auth.authRedirect&&this.props.setAuthRedirect()}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.orderForm)t.push({id:n,config:this.state.orderForm[n]});var r=Object(_.jsxs)("form",{className:Te.a.Form,onSubmit:this.formOnSubmit,children:[t.map((function(t){return Object(_.jsx)(_e,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,valid:t.config.valid,touched:t.config.touched,changed:function(n){return e.inputChangedHandler(n,t.id)}},t.id)})),Object(_.jsx)(fe,{btnType:"Success",disabled:!this.state.formIsValid,children:"Submit"})]});return Object(_.jsxs)("div",{className:Te.a.Auth,children:[this.props.auth.token?Object(_.jsx)(Se.a,{to:this.props.auth.authRedirect}):null,this.props.auth.loading?Object(_.jsx)(w,{}):Object(_.jsxs)(O,{children:[Object(_.jsx)("p",{className:Te.a.Hint,children:"Try Email: demo@demo.com and Password: demo123"}),Object(_.jsxs)("h1",{children:["\u8acb\u8f38\u5165",this.state.forSignIn?"\u767b\u5165":"\u8a3b\u518a","\u8cc7\u8a0a "]}),Object(_.jsx)("div",{className:Te.a.AuthDetail,children:"Supported By Firebase Authentication"}),r,this.props.auth.error?Object(_.jsx)("p",{style:{color:"red",fontWeight:"bold"},children:this.props.auth.error}):null,Object(_.jsxs)("div",{className:Te.a.Switch,children:[Object(_.jsxs)(fe,{btnType:"Black",clicked:this.switch,children:["\u6211\u8981",this.state.forSignIn?"\u8a3b\u518a":"\u767b\u5165"]}),Object(_.jsxs)(fe,{btnType:"Black",clicked:function(){return e.props.sign("GOOGLE")},children:[Object(_.jsx)("i",{className:"fab fa-google"}),"Google\u767b\u5165"]})]})]})]})}}]),n}(l.a.Component),De=Object(X.b)((function(e){return{auth:e.auth,fetch:e.fetch,cartList:e.order.cartList}}),(function(e){return{navToggler:function(){return e({type:"TOGGLE_NAV"})},setAuthRedirect:function(){return e($("/"))},sign:function(t,n,r,a){return e(function(e,t,n,r){return function(){var a=Object(q.a)(Q.a.mark((function a(c){var s,o,i,u,l,d,h,j;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s={},"GOOGLE"!==e){a.next=14;break}return o="https://identitytoolkit.googleapis.com/v1/accounts:signInWithIdp?key=".concat(K),a.next=5,window.gapi.auth2.getAuthInstance().signIn();case 5:return(i=a.sent).getAuthResponse().id_token&&c({type:"START_AUTH"}),u={requestUri:"http://localhost",postBody:"id_token=".concat(i.getAuthResponse().id_token,"&providerId=google.com"),returnIdpCredential:!0,returnSecureToken:!0},a.next=10,J.a.post(o,u);case 10:l=a.sent,s=ce(l.data),a.next=24;break;case 14:return c({type:"START_AUTH"}),d={email:t,password:n,returnSecureToken:!0},h="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(K),r||(h="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(K)),a.next=20,ae(h,d);case 20:if(!(j=a.sent).errors){a.next=23;break}return a.abrupt("return",c({type:"AUTH_ERROR",error:j.message}));case 23:s=ce(j);case 24:re(e,s.expiresIn,s.token,s.userId,s.userName),c(ne(s.expiresIn/1e3)),c(ee(e,s.token,s.userId,s.userName));case 27:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,n,r,a))},initSpinner:function(){return e({type:"INIT_SPINNER"})}}}))(Ee),Le=n(32),Ae=n(6),Re=n.n(Ae),Pe=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={showDetail:!1},e.detailToggler=function(t){e.setState((function(e){return{showDetail:!e.showDetail}})),t.target.classList.contains(Re.a.Contact__Header)?t.target.parentElement.children[1].classList.toggle(Re.a.ShowDetail):t.target.parentElement.parentElement.children[1].classList.toggle(Re.a.ShowDetail)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initSpinner(),this.props.fetchOrders(this.props.auth.token,this.props.auth.userId)}},{key:"render",value:function(){var e=this,t=Object(_.jsx)(w,{});if(!this.props.fetch.showSpinner&&!this.props.fetch.error){var n=Object(Le.a)(this.props.fetch.order);n.sort((function(e,t){return t.data.date-e.data.date})),t=n.map((function(t){var n=new Date(t.data.date);return Object(_.jsxs)("div",{className:Re.a.Order,children:[Object(_.jsxs)("div",{className:Re.a.Items,children:[Object(_.jsx)("h3",{children:"\u9910\u9ede\u660e\u7d30"}),Object(_.jsx)("div",{className:Re.a.OrderDate,children:"".concat(n.getFullYear(),"/").concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getHours(),":").concat(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())}),Object(_.jsxs)("div",{className:Re.a.Item,children:[Object(_.jsx)("div",{children:"\u54c1\u540d"}),Object(_.jsx)("div",{children:"\u6578\u91cf"}),Object(_.jsx)("div",{children:"\u55ae\u50f9"})]}),t.data.orders.map((function(e){return Object(_.jsxs)("div",{className:Re.a.Item,children:[Object(_.jsx)("div",{children:e.name}),Object(_.jsx)("div",{children:e.number}),Object(_.jsx)("div",{children:e.price})]},e.id)})),Object(_.jsxs)("div",{className:Re.a.Order_TotalPrice,children:["\u7e3d\u91d1\u984d: ",t.data.price," NTD"]})]}),Object(_.jsxs)("div",{className:Re.a.Contact,children:[Object(_.jsxs)("div",{className:Re.a.Contact__Header,onClick:function(t){return e.detailToggler(t)},children:[Object(_.jsx)("h2",{style:{display:"inline-block"},children:"\u806f\u7d61\u8cc7\u8a0a"}),Object(_.jsx)("i",{className:"fas fa-caret-".concat(e.state.showDetail?"up":"down"," ").concat(Re.a.IconShow)})]}),Object(_.jsxs)("div",{className:Re.a.Detail,children:[Object(_.jsxs)("div",{children:["\u806f\u7d61\u4eba: ",t.data.contactData.name," "]}),Object(_.jsxs)("div",{children:["\u9023\u7d61\u96fb\u8a71: ",t.data.contactData.phone]}),Object(_.jsxs)("div",{children:["email: ",t.data.contactData.email]}),Object(_.jsxs)("div",{children:["\u5916\u9001\u5730\u5740: ",t.data.contactData.address]})]})]})]},t.id)}))}return!this.props.showDetail&&this.props.fetch.error&&(t=Object(_.jsx)("h2",{children:this.props.fetch.error})),Object(_.jsxs)("div",{className:Re.a.Summary,children:[Object(_.jsx)("h1",{children:"\u8a02\u55ae\u7d00\u9304"}),t]})}}]),n}(l.a.Component),Me=Object(X.b)((function(e){return{auth:e.auth,fetch:e.fetch}}),(function(e){return{fetchOrders:function(t,n){return e(ie(t,n))},navToggler:function(){return e({type:"TOGGLE_NAV"})},initSpinner:function(){return e({type:"INIT_SPINNER"})}}}))(Pe),Fe=n(34),He=n.n(Fe);var Ue=function(){return Object(_.jsx)("div",{className:He.a.Footer,children:Object(_.jsxs)("div",{className:He.a.Description,children:[Object(_.jsxs)("h2",{className:He.a.Right,children:["\xa9 Designed by ",Object(_.jsx)("i",{className:"fab fa-github"})," ",Object(_.jsx)("a",{href:"https://github.com/ChiuWeiChung",children:"Rick Chiu"}),", This Project Is Only For Demonstration"]}),Object(_.jsxs)("div",{className:He.a.Utility,children:[Object(_.jsxs)("p",{children:["Build up in React ",Object(_.jsx)("i",{className:"fab fa-react"})," with Redux"]}),Object(_.jsxs)("p",{children:["Image Support: Unsplash ",Object(_.jsx)("i",{className:"fab fa-unsplash"})]}),Object(_.jsxs)("p",{children:["Icon Support: FontAwesome ",Object(_.jsx)("i",{className:"fab fa-font-awesome-flag"})]})]})]})})},Be=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"742939624640-o0m6ag9tln5ssjj9ict6mal083akgc82.apps.googleusercontent.com",scope:"email"}).then((function(){e.props.authCheckState()}))}))}},{key:"render",value:function(){var e=Object(_.jsxs)(Se.d,{children:[Object(_.jsx)(Se.b,{exact:!0,path:"/checkout",component:ke}),Object(_.jsx)(Se.b,{exact:!0,path:"/summary",component:Me}),Object(_.jsx)(Se.b,{exact:!0,path:"/auth",component:De}),Object(_.jsx)(Se.b,{path:"/",component:le}),Object(_.jsx)(Se.a,{to:"/"})]});return Object(_.jsxs)("div",{children:[Object(_.jsx)(f,{setAuthRedirect:this.props.setAuthRedirect,auth:this.props.auth,logout:this.props.logout,toggler:this.props.navToggler,showNavbar:this.props.showNavbar,cart:this.props.cart}),e,Object(_.jsx)(Ue,{})]})}}]),n}(l.a.Component),Ve=Object(X.b)((function(e){return{auth:e.auth,showNavbar:e.fetch.showNavbar}}),(function(e){return{navToggler:function(){return e({type:"TOGGLE_NAV"})},setAuthRedirect:function(){return e($("/"))},logout:function(){return e(te())},authCheckState:function(){return e((function(e){var t=localStorage.getItem("token");if(!t)return e(te());var n=new Date(parseInt(localStorage.getItem("expirationDate")));if(n<new Date)return e(te());var r=localStorage.getItem("userId"),a=localStorage.getItem("userName"),c=localStorage.getItem("method");e(ee(c,t,r,a)),e(ne((n.getTime()-(new Date).getTime())/1e3))}))}}}))(Be),Ge=(n(186),n(35)),We=n(78),Ze={showDetail:!1,currentItem:{name:null,price:null,total:null,number:1},cartList:[],total:0},Xe=function(e,t){t.event&&t.event.stopPropagation();var n,r=Object(se.a)({},e),a=e.cartList.find((function(e){return e.name===t.item.name}));return n=a?Object(se.a)(Object(se.a)({},r.currentItem),a):Object(se.a)(Object(se.a)(Object(se.a)({},r.currentItem),t.item),{},{number:1,total:t.item.price}),Object(se.a)(Object(se.a)({},e),{},{currentItem:n,showDetail:!0})},Ye=function(e,t){var n=Object(se.a)({},e),r=Object(se.a)({},n.currentItem);return!0===t.add?r.number++:r.number--,r.total=r.number*r.price,r.number<1||r.number>10?Object(se.a)({},e):Object(se.a)(Object(se.a)({},e),{},{currentItem:r})},Qe=function(e){var t=Object(se.a)({},e),n=Object(se.a)(Object(se.a)({},t.currentItem),{},{name:null,price:null,number:1,total:null});return Object(se.a)(Object(se.a)({},e),{},{currentItem:n,showDetail:!1})},qe=function(e,t){var n=Object(Le.a)(e.cartList),r=n.findIndex((function(e){return e.name===t.item.name}));r>=0?n[r]=t.item:n.push(t.item);var a=0;return n.forEach((function(e){return a+=e.total})),Object(se.a)(Object(se.a)({},Qe(e)),{},{cartList:n,total:a})},ze=function(e,t){var n=Object(se.a)({},e),r=Object(Le.a)(n.cartList).filter((function(e){return e.name!==t.name}));return Object(se.a)(Object(se.a)({},e),{},{cartList:r})},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOOSE_ITEM":return Xe(e,t);case"CHANGE_NUMBER":return Ye(e,t);case"INITIALIZE_ITEM":return Qe(e);case"PURCHASE_SUCCESS":return Object(se.a)(Object(se.a)({},Qe(e)),{},{cartList:[]});case"ADD_ITEM":return qe(e,t);case"REMOVE_ITEM":return ze(e,t);default:return e}},Ke={type:null,token:null,userId:null,userName:null,authRedirect:"/",loading:!1,error:null},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_AUTH":return Object(se.a)(Object(se.a)({},e),{},{loading:!0});case"AUTH_SUCCESS":return Object(se.a)(Object(se.a)({},e),{},{type:t.method,token:t.idToken,userId:t.userId,userName:t.email,error:null,loading:!1});case"SET_AUTH_REDIRECT":return Object(se.a)(Object(se.a)({},e),{},{authRedirect:t.path});case"LOGOUT":return Object(se.a)(Object(se.a)({},e),{},{type:null,token:null,userId:null,userName:null});case"AUTH_ERROR":return Object(se.a)(Object(se.a)({},e),{},{error:t.error,loading:!1});default:return e}},et={menuList:[],order:[],error:null,purchase:!1,showModal:!1,showSpinner:!1,showNavbar:!1},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MENU_START":return Object(se.a)(Object(se.a)({},e),{},{showSpinner:!0});case"FETCH_MENU_SUCCESS":return Object(se.a)(Object(se.a)({},e),{},{menuList:t.menuList,showSpinner:!1});case"FETCH_MENU_FAIL":return Object(se.a)(Object(se.a)({},e),{},{error:t.err,showModal:!0,showSpinner:!1});case"PURCHASE_START":return Object(se.a)(Object(se.a)({},e),{},{showSpinner:!0});case"PURCHASE_SUCCESS":return Object(se.a)(Object(se.a)({},e),{},{showSpinner:!1,purchase:!0});case"FETCH_ORDERS_START":return Object(se.a)(Object(se.a)({},e),{},{showSpinner:!0});case"FETCH_ORDERS_SUCCESS":return Object(se.a)(Object(se.a)({},e),{},{order:t.order,showSpinner:!1});case"FETCH_ORDERS_FAIL":return Object(se.a)(Object(se.a)({},e),{},{error:t.err,showSpinner:!1});case"TOGGLE_NAV":return Object(se.a)(Object(se.a)({},e),{},{showNavbar:!e.showNavbar});case"INIT_SPINNER":return Object(se.a)(Object(se.a)({},e),{},{purchase:!1,showSpinner:!1,error:!1,showNavbar:!1});case"MODAL_CLOSE":return Object(se.a)(Object(se.a)({},e),{},{showModal:!1});default:return e}},nt=Object(Ge.b)({order:Je,auth:$e,fetch:tt}),rt=Ge.c,at=Object(Ge.d)(nt,rt(Object(Ge.a)(We.a)));a.a.render(Object(_.jsx)(X.a,{store:at,children:Object(_.jsx)(j.a,{children:Object(_.jsx)(Ve,{})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={Cost:"CostColumn_Cost__1_Y2w",Cost__List:"CostColumn_Cost__List__3MwSs",Cost__List__Item:"CostColumn_Cost__List__Item__2rpDc",Cost__ItemName:"CostColumn_Cost__ItemName__12W1l",Item__Detail:"CostColumn_Item__Detail__3ttVZ",Modified:"CostColumn_Modified__3q3hh",CheckoutButton:"CostColumn_CheckoutButton__1eYcj",Show:"CostColumn_Show__3RTtt",Cross:"CostColumn_Cross__2un3T"}},21:function(e,t,n){e.exports={Items:"Item_Items__sqEy8",Items__flexbox:"Item_Items__flexbox__7WZFN",Item:"Item_Item__2sVV_",Item__Picture:"Item_Item__Picture__3Tu7b",Item__Pic:"Item_Item__Pic__CN34A",Item__Info:"Item_Item__Info__1tbQC",Item__Button:"Item_Item__Button__22sUT"}},22:function(e,t,n){e.exports={Menu:"Menu_Menu__seh0G",List:"Menu_List__2svXK",Item:"Menu_Item__1MlXY"}},24:function(e,t,n){e.exports={Container:"CheckoutPage_Container__27UZn",Checkout:"CheckoutPage_Checkout__21k4Z",Checkout__ItemList:"CheckoutPage_Checkout__ItemList__5OstF",Checkout__Items:"CheckoutPage_Checkout__Items__1dne3",Item__Name:"CheckoutPage_Item__Name__XpHF2",Item:"CheckoutPage_Item__Vj5VF",Checkout__TotalPrice:"CheckoutPage_Checkout__TotalPrice__2E8ej",CheckButton:"CheckoutPage_CheckButton__3ZJoh",Line:"CheckoutPage_Line__IZ00N"}},25:function(e,t,n){e.exports={Input:"Input_Input__3OxVR",Label:"Input_Label__1QXj2",InputElement:"Input_InputElement__1DyXG",Fixed:"Input_Fixed__HA3Nu",Invalid:"Input_Invalid__38NAc",Valid:"Input_Valid__tePAE"}},28:function(e,t,n){e.exports={Auth:"AuthPage_Auth__1k_yy",Hint:"AuthPage_Hint__50CnP",AuthDetail:"AuthPage_AuthDetail__3LPWc",Switch:"AuthPage_Switch__1o8sW",Form:"AuthPage_Form__1AASW"}},33:function(e,t,n){e.exports={Navbar:"Navbar_Navbar__3zgTe",Title:"Navbar_Title__Xo38a",Navigation:"Navbar_Navigation__ca8_q",Item:"Navbar_Item__1OgJz",Show:"Navbar_Show__Ank99"}},34:function(e,t,n){e.exports={Footer:"Footer_Footer__oPF_O",Right:"Footer_Right__1fv8a",Description:"Footer_Description__vxa8c",Utility:"Footer_Utility__12rED"}},39:function(e,t,n){e.exports={ViewCart:"ViewCart_ViewCart__1eHrQ",Content:"ViewCart_Content__3hcUf",Number:"ViewCart_Number__3m-m_"}},40:function(e,t,n){e.exports={Button:"Button_Button__2u_Ec",Success:"Button_Success__2e-xU",Info:"Button_Info__2mXyG",Black:"Button_Black__QaHpi",FullWidth:"Button_FullWidth__1idHU"}},45:function(e,t,n){e.exports={Hamburger__Container:"Hamburger_Hamburger__Container__3LQdc",Hamburger:"Hamburger_Hamburger___Pimd"}},48:function(e,t,n){e.exports={Container:"OrderPage_Container__1mUaD",List:"OrderPage_List__1Mv88"}},6:function(e,t,n){e.exports={Summary:"SummaryPage_Summary__o32wE",Order:"SummaryPage_Order__3THXR",Items:"SummaryPage_Items__1SiLx",OrderDate:"SummaryPage_OrderDate__RfIxC",Item:"SummaryPage_Item__1BU87",Contact:"SummaryPage_Contact__2T0a3",Contact__Header:"SummaryPage_Contact__Header__3r1PS",Detail:"SummaryPage_Detail__2xO_h",Order_TotalPrice:"SummaryPage_Order_TotalPrice__YUsm8",IconShow:"SummaryPage_IconShow__30eVf",ShowDetail:"SummaryPage_ShowDetail__2HE3I"}},73:function(e,t,n){e.exports={Loader:"Loader_Loader__ZYVC0",load4:"Loader_load4__tAS-O"}},74:function(e,t,n){e.exports={Modal:"Modal_Modal__34KdR"}},75:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__39wLp"}},77:function(e,t,n){e.exports={ContactData:"ContactData_ContactData__3RACD"}}},[[187,1,2]]]);
//# sourceMappingURL=main.0071e78c.chunk.js.map